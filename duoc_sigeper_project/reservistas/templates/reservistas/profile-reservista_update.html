{% extends "core/base.html" %}
{% load static %}
{% block tittle %}Update Reservista{% endblock %}

{% block content %}
<main id="main" class="main">
  <div class="pagetitle">
      <h1>Actualizar datos de Reservista</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="{% url 'index' %}">Inicio</a></li>
          <li class="breadcrumb-item">Gestión de la Reserva</li>
          <li class="breadcrumb-item active">Actualización</li>
        </ol>
      </nav>
  </div><!-- End Page Title -->
  
   <section class="section">
    <div class="card">
      <div class="card-header">
          <h3 class="card-title text-center">Actualización de datos del Reservista <a class="text-capitalize">{{  form.grado.value|add:" (grado)" }} {{ form.nombre.value }} {{ form.apellido_paterno.value }}</h3>
      </div>
      <!-- Bloque para mostrar los mensajes -->
      {% if messages %}
      <div class="alert">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} text-center">
          {{ message }}
        </div>
        {% endfor %}
      </div>
      {% endif %}
      <!-- Fin bloque mensajes -->
      <div class="card-body">
        <form method="post" enctype="multipart/form-data">
          {% csrf_token %}
            <div class="card p-3 mt-3">
            <h5 class="card-title">Antecedentes Personales</h5>
            <!--ANTECEDENTES PERSONALES-->
            <div class="row mt-3">
              <div class="col-2 mb-3">
                <label for="id_run" class="form-label">RUN</label>
                <input type="number" class="form-control" id="id_run" name="run" value="{{ form.run.value }}" placeholder="1234567" required>
              </div>            
              <div class="col-2 mb-3">
                <label for="id_dv" class="form-label">Dígito Verificador</label> 
                <input type="text" class="form-control" id="id_dv" name="dv" value="{{ form.dv.value }}" maxlength="1" placeholder="k" required>
              </div> 
              
            </div>

            <div class="row">
              <div class="mb-3 col-4">
                <label for="id_nombre" class="form-label">Nombre</label>
                <input type="text" class="form-control" id="id_nombre" name="nombre" value="{{ form.nombre.value }}" required>
              </div>              
              <div class="mb-3 col-4">
                <label for="id_apellido_paterno" class="form-label">Apellido Paterno</label>
                <input type="text" class="form-control" id="id_apellido_paterno" name="apellido_paterno" value="{{ form.apellido_paterno.value }}" required>
              </div>              
              <div class="mb-3 col-4">
                <label for="id_apellido_materno" class="form-label">Apellido Materno</label>
                <input type="text" class="form-control" id="id_apellido_materno" name="apellido_materno" value="{{ form.apellido_materno.value }}" required>
              </div>
            </div>

            <div class="row ">
              <div class="col-2 mb-3">
                <label for="id_fecha_nacimiento" class="form-label">Fecha de Nacimiento</label>
                <input type="date" class="form-control" id="id_fecha_nacimiento" name="fecha_nacimiento" value="{{ form.fecha_nacimiento.value|date:'Y-m-d' }}" required>
              </div>
              <div class="col-2 mb-3">
                <label for="id_sexo" class="form-label">Sexo</label>
                <select class="form-select" id="id_sexo" name="genero" required>
                  <option value="">Seleccione...</option>
                  <option value="Femenino" {% if form.genero.value == 'Femenino' %}selected{% endif %}>Femenino</option>
                  <option value="Masculino" {% if form.genero.value == 'Masculino' %}selected{% endif %}>Masculino</option>
                </select>
              </div> 
              <div class="col-2 mb-3">
                <label for="id_grupo_sanguineo" class="form-label">Grupo Sanguíneo</label>
                <select class="form-select" id="id_grupo_sanguineo" name="grupo_sanguineo">
                  <option value="">Seleccione...</option>
                  {% for grupo_sanguineo in grupos_sanguineos %}
                    <option value="{{ grupo_sanguineo.id }}" {% if form.grupo_sanguineo.value == grupo_sanguineo.id %}selected{% endif %}>{{ grupo_sanguineo.nombre }} </option>
                  {% endfor %}
                </select>
              </div> 
              <div class="col-2 mb-3">
                <label for="id_estado_civil" class="form-label">Estado Civil</label>
                <select class="form-select" id="id_estado_civil" name="estado_civil">
                  <option value="">Seleccione...</option>
                  {% for estado_civil in estados_civiles %}
                    <option value="{{ estado_civil.id }}" {% if form.estado_civil.value == estado_civil.id %}selected{% endif %}>{{ estado_civil.nombre }}</option>
                  {% endfor %}
                </select>
              </div> 
              <div class="col-4 mb-3">
                <label for="id_profesion" class="form-label">Profesión</label>
                <select class="form-select" id="id_profesion" name="profesion">
                  <option value="">Seleccione...</option>
                  {% for profesion in profesiones %}
                    <option value="{{ profesion.id }}" {% if form.profesion.value == profesion.id %}selected{% endif %}>{{ profesion.nombre }}</option>
                  {% endfor %}
                </select>
              </div>         
            </div>
            
            <div class="row ">
              <div class="col-4 mb-3">
                <label for="id_ciudad" class="form-label">Lugar de Nacimiento</label>
                <select class="form-select" id="id_ciudad" name="ciudad" required>
                  <option value="">Seleccione...</option>
                  {% for ciudad in ciudades %}
                    <option value="{{ ciudad.id }}" {% if form.ciudad.value == ciudad.id %}selected{% endif %}>{{ ciudad.nombre }}</option>
                  {% endfor %}
                </select>
              </div>
              <div class="col-4 mb-3">
                <label for="id_isapre" class="form-label">ISAPRE</label>
                <select class="form-select" id="id_isapre" name="isapre">
                  <option value="">Seleccione...</option>
                  {% for isapre in isapres %}
                    <option value="{{ isapre.id }}" {% if form.isapre.value == isapre.id %}selected{% endif %}>{{ isapre.nombre }}</option>
                  {% endfor %}
                </select>
              </div><div class="col-4 mb-3">
                <label for="id_afp" class="form-label">AFP</label>
                <select class="form-select" id="id_afp" name="afp">
                  <option value="">Seleccione...</option>
                  {% for afp in afps %}
                    <option value="{{ afp.id }}" {% if form.afp.value == afp.id %}selected{% endif %}>{{ afp.nombre }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
            
          </div> <!--End card Antecedentes Personal-->
          <div class="card p-3 mt-3">
            <h5 class="card-title">Antecedentes Militares</h5>
          <!--ANTECEDENTES MILITARES-->
            <div class="row mt-3">
              <div class="col-4 mb-3">
                <label for="id_categoria" class="form-label">Categoria</label>
                <select class="form-select" id="id_categoria" name="categoria" required>
                  <option value="">Seleccione...</option>
                  {% for categoria in categorias %}
                    <option value="{{ categoria.id }}" {% if form.categoria.value == categoria.id %}selected{% endif %}>{{ categoria.nombre }}</option>
                  {% endfor %}
                </select>
              </div>            
              <div class="col-4 mb-3">
                <label for="id_arma" class="form-label">Escalafón</label> 
                <select class="form-select" id="id_arma" name="arma" required>
                  <option value="">Seleccione...</option>
                  {% for arma in armas %}
                    <option value="{{ arma.id }}" {% if form.arma.value == arma.id %}selected{% endif %}>{{ arma.nombre }}</option>
                  {% endfor %}
                </select>
              </div>              
              <div class="col-4 mb-3">
                <label for="id_grado" class="form-label">Grado</label> 
                <select class="form-select" id="id_grado" name="grado" required>
                  <option value="">Seleccione...</option>
                  {% for grado in grados %}
                    {% if "rva" in grado.grado_sigla|lower %}
                      <option value="{{ grado.id }}" {% if form.grado.value == grado.id %}selected{% endif %}>{{ grado.grado_sigla }}</option>
                    {% endif %}
                  {% endfor %}
                </select>
              </div>              
              
            </div>
            <div class="row mt-3">
              <div class="col-4 mb-3">
                <label for="id_uac" class="form-label">UAC</label>
                <select class="form-select" id="id_uac" name="uac" required>
                  <option value="">Seleccione...</option>
                  {% for uac in uacs %}
                    <option value="{{ uac.id }}" {% if form.uac.value == uac.id %}selected{% endif %}>{{ uac.uac_sigla }}</option>
                  {% endfor %}
                </select>
              </div>            
              <div class="col-4 mb-3">
                <label for="id_ubm" class="form-label">UBM</label> 
                <select class="form-select" id="id_ubm" name="ubm" required>
                  <option value="">Seleccione...</option>
                  {% for ubm in ubms %}
                    <option value="{{ ubm.id }}" {% if form.ubm.value == ubm.id %}selected{% endif %}>{{ ubm.ubm_sigla }}</option>
                  {% endfor %}
                </select>
              </div>              
              <div class="col-4 mb-3">
                <label for="id_estado" class="form-label">Estado</label> 
                <select class="form-select" id="id_estado" name="estado" required>
                  <option value="">Seleccione...</option>                  
                  <option value="Activo" {% if form.estado.value == 'Activo' %}selected{% endif %}>Activo</option>                  
                  <option value="Retiro Temporal" {% if form.estado.value == 'Retiro Temporal' %}selected{% endif %}>Retiro Temporal</option>                  
                </select>
              </div>             
              
            </div>


          </div> <!--End card Antecedentes Militares-->

          <div class="card p-3 mt-3">
            <h5 class="card-title">Subir fotos</h5>
          <!--CARGAR FOTO-->
            <div class="row mb-3">
              <label for="id_foto" class="col-md-4 col-lg-3 col-form-label">Cargar Imagen</label>
              <div class="col-md-8 col-lg-9">
                <input class="form-control" type="file" id="id_foto" name="foto" accept=".jpg">
                <small class="form-text text-muted">Formato permitido: JPG. Tamaño máximo: 2MB.</small>                
              </div>
            </div>
          </div> <!--End CARGAR FOTO-->

          <div class="container text-center">
            <div class="row justify-content-center">
              <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary ">Actualizar Reservista</button>
              </div>
            </div>
          </div>

        </form>
      </div>
    </div>
  </section>
</main>
{% endblock %}


{% block extra_js %}



{% endblock %}

